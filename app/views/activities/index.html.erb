<div class="header-section">
  <h1>Explorez une variété d'activités</h1>
  <p>Explorez. Connectez. Vivez plainement.</p>
</div>

<div class="container-index-activity">
  <div class="category-menu">
    <ul>
      <li class="category-link">
        <%= link_to activities_path(filters: { categories: "Nature" }) do %>
          Nature
        <% end %>
      </li>
      <li class="category-link">
        <%= link_to activities_path(filters: { categories: "Excursions" }) do %>
          Excursions
        <% end %>
      </li>
      <li class="category-link">
        <%= link_to activities_path(filters: { categories: "Culture" }) do %>
          Culture
        <% end %>
      </li>
      <li class="category-link">
        <%= link_to activities_path(filters: { categories: "Pour les enfants" }) do %>
          Pour les enfants
        <% end %>
      </li>
      <li class="category-link">
        <%= link_to activities_path(filters: { categories: "Balades" }) do %>
          Balades
        <% end %>
      </li>
    </ul>
  </div>

  <div class="content-section">
    <div id="activity-map" data-controller="map"
      data-map-api-key-value="<%= ENV['MAPBOX_TOKEN'] %>"
      data-map-markers-value="<%= @markers.to_json %>">
    </div>

    <div class="cards-activities-container">
      <% if @activities.empty? %>
        <h2>Désolé, l'activité que vous avez choisi n'est pas disponible.</h2>
      <% else %>
        <% @activities.each do |activity| %>
          <div class="activity-card">
            <div class="carousel slide" id="carousel-<%= activity.id %>" data-ride="carousel">
              <div class="carousel-inner">
                <% activity.pictures.each_with_index do |picture, index| %>
                  <div class="carousel-item <%= 'active' if index == 0 %>">
                    <%= cl_image_tag picture.key, class: "d-block w-100", height: 300, width: 400, crop: :fill %>
                  </div>
                <% end %>
              </div>
              <a class="carousel-control-prev" href="#carousel-<%= activity.id %>" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carousel-<%= activity.id %>" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
            <%= link_to activity_path(activity) do %>
              <h3><%= activity.name %></h3>
              <p><%= truncate(activity.description, length: 100) %></p>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
